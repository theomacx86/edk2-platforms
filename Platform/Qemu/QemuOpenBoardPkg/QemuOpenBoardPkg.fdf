[FD.QemuOpenBoardPkg]
  BaseAddress   = 0xFF800000|gMinPlatformPkgTokenSpaceGuid.PcdFlashAreaBaseAddress
  Size          = 0x800000|gMinPlatformPkgTokenSpaceGuid.PcdFlashAreaSize
  ErasePolarity = 1
  BlockSize     = 0x1000
  NumBlocks     = 0x800

SET gMinPlatformPkgTokenSpaceGuid.PcdFlashAreaBaseAddress  = 0xFFB90000
SET gMinPlatformPkgTokenSpaceGuid.PcdFlashAreaSize         = 0x800000

  !include QemuOpenBoardPkg/Include/Fdf/FlashMap.fdf.inc

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvAdvancedOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvAdvancedSize
  FV = FvAdvanced

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvSecurityOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvSecuritySize
  FV = FvSecurity

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvOsBootOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvOsBootSize
  FV = FvOsBoot

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvUefiBootOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvUefiBootSize
  FV = FvUefiBoot

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvBspOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvBspSize
  FV = FvBsp

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvPostMemoryOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvPostMemorySize
  FV = FvPostMemory

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspSOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspSSize
  FV = FvFspS

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspMOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspMSize
  FV = FvFspM

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspTOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvFspTSize
  FV = FvFspT

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvBspPreMemoryOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvBspPreMemorySize
  FV = FvBspPreMemory

  gMinPlatformPkgTokenSpaceGuid.PcdFlashFvPreMemoryOffset|gMinPlatformPkgTokenSpaceGuid.PcdFlashFvPreMemorySize
  FV = FvPreMemory

###########################
#
# Stage 6 Firmware volumes
#
###########################
[FV.FvAdvanced]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = 936D6D65-CB6C-4B87-A51C-70D56511CB55

###########################
#
# Stage 5 Firmware volumes
#
###########################
[FV.FvSecurity]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = 1AE6AB90-9431-425B-9A92-ED2708A4E982

###########################
#
# Stage 4 Firmware volumes
#
###########################
[FV.FvOsBoot]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = AE8F0EA0-1614-422D-ABC1-C518596F1678

###########################
#
# Stage 3 Firmware volumes
#
###########################
[FV.FvUefiBoot]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = D2F110DB-2388-4963-BEFD-5889EEE01569

  INF MdeModulePkg/Core/Dxe/DxeMain.inf
  INF MdeModulePkg/Universal/PCD/Dxe/Pcd.inf
  INF MdeModulePkg/Universal/ReportStatusCodeRouter/RuntimeDxe/ReportStatusCodeRouterRuntimeDxe.inf
  INF MdeModulePkg/Universal/StatusCodeHandler/RuntimeDxe/StatusCodeHandlerRuntimeDxe.inf
  INF MdeModulePkg/Universal/Metronome/Metronome.inf
  INF MdeModulePkg/Universal/WatchdogTimerDxe/WatchdogTimer.inf
  INF PcAtChipsetPkg/PcatRealTimeClockRuntimeDxe/PcatRealTimeClockRuntimeDxe.inf
  INF MdeModulePkg/Core/RuntimeDxe/RuntimeDxe.inf
  INF MdeModulePkg/Universal/Variable/RuntimeDxe/VariableRuntimeDxe.inf
  INF MdeModulePkg/Universal/MonotonicCounterRuntimeDxe/MonotonicCounterRuntimeDxe.inf
  INF MdeModulePkg/Universal/BdsDxe/BdsDxe.inf
  INF MdeModulePkg/Universal/Console/TerminalDxe/TerminalDxe.inf
  INF MdeModulePkg/Universal/SecurityStubDxe/SecurityStubDxe.inf
  INF MdeModulePkg/Universal/CapsuleRuntimeDxe/CapsuleRuntimeDxe.inf
  INF UefiCpuPkg/CpuDxe/CpuDxe.inf
  INF PcAtChipsetPkg/HpetTimerDxe/HpetTimerDxe.inf
  INF MdeModulePkg/Bus/Pci/PciBusDxe/PciBusDxe.inf
  INF MdeModulePkg/Universal/Disk/UnicodeCollation/EnglishDxe/EnglishDxe.inf
  INF MdeModulePkg/Universal/Console/GraphicsOutputDxe/GraphicsOutputDxe.inf
  INF MdeModulePkg/Universal/Console/GraphicsConsoleDxe/GraphicsConsoleDxe.inf
  INF MdeModulePkg/Universal/Console/ConSplitterDxe/ConSplitterDxe.inf
  INF MdeModulePkg/Universal/DevicePathDxe/DevicePathDxe.inf


###########################
#
# Stage 2 Firmware volumes
#
###########################

[FV.FvBsp]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = FCA0BC4A-994D-4EF9-BD56-A8C45872C2A8


[FV.FvPostMemory]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = 5A1D6978-BABE-42F9-A629-F7B3B6A1E1BD

  INF MinPlatformPkg/PlatformInit/SiliconPolicyPei/SiliconPolicyPeiPostMem.inf
  INF MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPostMem.inf
  INF MdeModulePkg/Core/DxeIplPeim/DxeIpl.inf
  INF MdeModulePkg/Universal/ResetSystemRuntimeDxe/ResetSystemRuntimeDxe.inf
  INF MdeModulePkg/Bus/Pci/PciHostBridgeDxe/PciHostBridgeDxe.inf

###########################
#
# Stage 1 Firmware volumes
#
###########################

[FV.FvPostMemorySilicon]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = EF76DFDC-2B7D-423D-BFE4-8FD4BB22E770

[FV.FvFspS]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = C6786443-AFCA-471B-A8FC-E8C330708F99

[FV.FvPreMemorySilicon]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid    = F0205C0E-0AD1-499C-A5F9-96BAF98248A0
  INF  MdeModulePkg/Universal/ReportStatusCodeRouter/Pei/ReportStatusCodeRouterPei.inf
  INF  MdeModulePkg/Universal/StatusCodeHandler/Pei/StatusCodeHandlerPei.inf

[FV.FvFspM]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = 03982cf7-246a-4356-b6ba-436a2251595c

  
  INF  MdeModulePkg/Universal/PCD/Pei/Pcd.inf
  INF  MdeModulePkg/Core/Pei/PeiMain.inf  

  FILE FV_IMAGE = 83B39C64-BFB9-42EC-A7A3-527854A5C4C3 {
      SECTION FV_IMAGE = FvPreMemorySilicon
  }


[FV.FvFspT]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = 958CAF39-0B6C-40F1-B190-EC91C536CFF9

  
[FV.FvAdvancedPreMemory]
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = 43528CE0-812B-4074-B77E-C49E7A2F4FE1

[FV.FvBspPreMemory] 

  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = 5CF9C072-385F-44FC-B21B-002074251C08

  FILE FV_IMAGE = 90B948EA-FF73-4689-B90A-A54F86C1FC01 {
      SECTION FV_IMAGE = FvAdvancedPreMemory
  } 

[FV.FvSecurityPreMemory]
  
  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = F626B0FB-D759-44A8-B131-42408BB3533D


[FV.FvPreMemory] 

  !include MinPlatformPkg/Include/Fdf/CommonSpiFvHeaderInfo.fdf
  FvNameGuid      = BD479C6B-2EFF-401F-A7F1-566347B41D07

  FILE FV_IMAGE = 618FBA00-2231-41F6-9931-25A89DF501D3 {
      SECTION FV_IMAGE = FvSecurityPreMemory
  }
  
  INF  MdeModulePkg/Universal/PCD/Pei/Pcd.inf
  INF MdeModulePkg/Universal/FaultTolerantWritePei/FaultTolerantWritePei.inf
  INF MdeModulePkg/Universal/Variable/Pei/VariablePei.inf
  INF MinPlatformPkg/PlatformInit/ReportFv/ReportFvPei.inf
  INF QemuOpenBoardPkg/Library/PlatformInitPei/PlatformInitPei.inf
  INF MinPlatformPkg/PlatformInit/SiliconPolicyPei/SiliconPolicyPeiPreMem.inf
  INF MinPlatformPkg/PlatformInit/PlatformInitPei/PlatformInitPreMem.inf
  INF UefiCpuPkg/SecCore/SecCore.inf

!include MinPlatformPkg/Include/Fdf/RuleInclude.fdf